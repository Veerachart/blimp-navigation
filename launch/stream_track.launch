<launch>
    <arg name="save_name" default="test"/>
    <node name="streamer" pkg="blimp_navigation" type="stream_file_node" output="screen" required="true">
        <param name="constant_rate" value="true"/>
        <!--<param name="left_video" value="/home/veerachart/Videos/0717_1925-cam_left_human_tracking.avi"/>
        <param name="right_video" value="/home/veerachart/Videos/0717_1925-cam_right_human_tracking.avi"/>-->
        <param name="left_video" value="/home/veerachart/Videos/0719_2351-cam_left_full_exp.avi"/>
        <param name="right_video" value="/home/veerachart/Videos/0719_2351-cam_right_full_exp.avi"/>
        <!--<param name="left_video" value="/media/veerachart/Seagate Backup Plus Drive/Onboard_camera/0718_1917-cam_left_full_exp.avi"/>
        <param name="right_video" value="/media/veerachart/Seagate Backup Plus Drive/Onboard_camera/0718_1917-cam_right_full_exp.avi"/>-->
        <param name="left_start_ms" value="0"/>
        <param name="right_start_ms" value="0"/>
        <remap from="/cam_left/raw_video" to="/cam_left/raw_stream"/>
        <remap from="/cam_right/raw_video" to="/cam_right/raw_stream"/>
        <!--<param name="constant_rate" value="true"/>
        <param name="left_video" value="/home/veerachart/Videos/Left_20180608-205121.mp4"/>
        <param name="right_video" value="/home/veerachart/Videos/Right_20180608-205123.mp4"/>
        <param name="left_start_ms" value="13700"/>
        <param name="right_start_ms" value="11300"/>-->
        <!--<param name="constant_rate" value="false"/>
        <param name="left_video" value="/home/veerachart/Videos/CLIP_20170915-215436_left.mp4"/>
        <param name="right_video" value="/home/veerachart/Videos/CLIP_20170915-215424_right.mp4"/>
        <param name="left_start_ms" value="299050"/>
        <param name="right_start_ms" value="297000"/>-->
    </node>
    
    <node name="track_left" pkg="blimp_navigation" type="blimp_human_track_node" output="screen">
        <remap from="camera" to="left"/>
        <remap from="/cam_left/raw_video" to="/cam_left/raw_stream"/>
        <param name="detect_human" value="true" />
        <param name="file_name" command="date +'$(find blimp_navigation)/log/%m%d_%H%M-$(arg save_name)_l'"/>
    </node>
    
    <node name="track_right" pkg="blimp_navigation" type="blimp_human_track_node" output="screen">
        <remap from="camera" to="right"/>
        <remap from="/cam_right/raw_video" to="/cam_right/raw_stream"/>
        <param name="detect_human" value="true" />
        <param name="file_name" command="date +'$(find blimp_navigation)/log/%m%d_%H%M-$(arg save_name)_r'"/>
    </node>
    
    <node name="triangulator" pkg="blimp_navigation" type="triangulate_blimp_node" output="screen">
        <param name="file_name" command="date +'$(find blimp_navigation)/log/%m%d_%H%M-$(arg save_name)'"/>
    </node>
    
    <node name="blimp_controller" pkg="blimp_navigation" type="blimp_controller_node" output="screen">
        <param name="file_name" command="date +'$(find blimp_navigation)/log/%m%d_%H%M-controller_$(arg save_name)_l.csv'"/>
    </node>
    
    <!--<node name="viewer_left" pkg="image_view" type="image_view">
        <remap from="image" to ="/cam_left/detection_image"/>
    </node>
    
    <node name="viewer_right" pkg="image_view" type="image_view">
        <remap from="image" to ="/cam_right/detection_image"/>
    </node>-->
</launch>
